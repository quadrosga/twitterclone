{% extends 'base_generic.html' %} {% block content %}
<h2>Your Feed</h2>

{% for tweet in tweets %}
<div class="tweet">
  <p><strong>{{ tweet.user.username }}</strong> said:</p>
  <p>{{ tweet.content }}</p>
  <p><em>{{ tweet.created_at }}</em></p>

  <!-- Follow/Unfollow button -->
  {% if request.user != tweet.user %} {% if
  request.user.following.filter(following=tweet.user).exists %}
  <form action="{% url 'unfollow' tweet.user.id %}" method="POST">
    {% csrf_token %}
    <button type="submit">Unfollow</button>
  </form>
  {% else %}
  <form action="{% url 'follow' tweet.user.id %}" method="POST">
    {% csrf_token %}
    <button type="submit">Follow</button>
  </form>
  {% endif %}

  <!-- Like/Unlike button -->
  {% if request.user != tweet.user %} {% if
  tweet.like_set.filter(user=request.user).exists %}
  <form action="{% url 'unlike_tweet' tweet.id %}" method="POST">
    {% csrf_token %}
    <button type="submit">Unlike</button>
  </form>
  {% else %}
  <form action="{% url 'like_tweet' tweet.id %}" method="POST">
    {% csrf_token %}
    <button type="submit">Like</button>
  </form>
  {% endif %}

  <!-- Retweet/Unretweet button -->
  {% if request.user != tweet.user %} {% if
  tweet.retweet_set.filter(user=request.user).exists %}
  <form action="{% url 'unretweet' tweet.id %}" method="POST">
    {% csrf_token %}
    <button type="submit">Unretweet</button>
  </form>
  {% else %}
  <form action="{% url 'retweet' tweet.id %}" method="POST">
    {% csrf_token %}
    <button type="submit">Retweet</button>
  </form>
  {% endif %}

  <!-- Reply button -->
  <form action="{% url 'reply_to_tweet' tweet.id %}" method="GET">
    <button type="submit">Reply</button>
  </form>
</div>
{% empty %}
<p>No tweets to display.</p>
{% endfor %} {% endblock %}
